<!DOCTYPE html>
<html lang="lt">

<head>
    <meta charset="UTF-8">
    <title>Archimedo jėgos simuliacija</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.min.js"></script>
    <style>
        /* Stilius puslapiui */
        body {
            margin: 0;
            padding: 0;
            font-family: sans-serif;
            display: flex;
        }

        /* Valdikliai */
        #valdikliai {
            background: #f0f0f0;
            padding: 10px;
            border-right: 1px solid #ccc;
            width: 260px;
            height: 100vh;
            box-sizing: border-box;
            overflow-y: auto;
        }

        label {
            font-size: 14px;
        }

        input {
            width: 100%;
            margin: 2px 0 8px 0;
            box-sizing: border-box;
        }

        button {
            margin-top: 5px;
            width: 100%;
            box-sizing: border-box;
        }

        /* Paaiškinimo ir papildomos informacijos skyriai */
        #paaiskinimas,
        #daugiauInformacijos {
            display: none;
            background: #f9f9f9;
            padding: 10px;
            margin-top: 10px;
            border: 1px solid #ccc;
        }

        /* Canvas konteineris dešinėje pusėje */
        #canvasContainer {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-grow: 1;
            background: #ddd;
            height: 100vh;
        }
    </style>
</head>

<body>

    <!-- Valdikliai -->
    <div id="valdikliai">
        <label>Masa (kg):</label><br>
        <input type="number" id="masesIvestis" value="10" step="0.1"><br>

        <label>Tūris (m³):</label><br>
        <input type="number" id="turioIvestis" value="0.02" step="0.001"><br>

        <label>Skysčio tankis (kg/m³):</label><br>
        <input type="number" id="skyscioTankioIvestis" value="1000" step="10"><br>

        <label>Gravitacija (m/s²):</label><br>
        <input type="number" id="gravitacijosIvestis" value="9.81" step="0.01"><br>

        <!-- Simuliacijos valdymo mygtukai -->
        <button id="pradetiMygtukas">Pradėti</button>
        <button id="sustabdytiMygtukas">Sustabdyti</button>

        <!-- Paaiškinimų mygtukai -->
        <button id="rodytiPaaiskinima">Rodyti paaiškinimą</button>
        <button id="rodytiDaugiau">Rodyti daugiau informacijos</button>

        <!-- Paaiškinimas apie fiziką -->
        <div id="paaiskinimas">
            <h3>Paaiškinimas</h3>
            <p><b>Archimedo dėsnis:</b></p>
            <p>Skysčio stumiamoji jėga (Archimedo jėga) lygi kūno išstumto skysčio svoriui.</p>

            <h4>Naudojamos formulės:</h4>
            <ul>
                <li><b>Archimedo jėga:</b> Fb = ρ × V × g</li>
                <li><b>Gravitacinė jėga:</b> Fg = m × g</li>
            </ul>

            <h4>Formulėse:</h4>
            <ul>
                <li><b>Fb</b> – Archimedo jėga (N)</li>
                <li><b>Fg</b> – Gravitacinė jėga (N)</li>
                <li><b>ρ</b> – Skysčio tankis (kg/m³)</li>
                <li><b>V</b> – Kūno tūris (m³)</li>
                <li><b>g</b> – Gravitacijos pagreitis (m/s²)</li>
                <li><b>m</b> – Kūno masė (kg)</li>
            </ul>

            <h4>Sprendimo logika:</h4>
            <ul>
                <li>Jei <b>Fb > Fg</b> → Kūnas plūduriuoja</li>
                <li>Jei <b>Fb < Fg</b> → Kūnas skęsta</li>
            </ul>
        </div>

        <!-- Daugiau informacijos - po paaiškinimo -->
        <div id="daugiauInformacijos">
            <h3>Daugiau informacijos</h3>
            <p>Archimedo dėsnis taikomas ne tik skysčiams, bet ir dujoms, pavyzdžiui, oro balionams atmosferoje.</p>
            <p>Sužinok daugiau:</p>
            <ul>
                <li><a href="https://klase.eduka.lt/publisher/material/open/theory/12384/19?teachingPackageId=19&teachingGroupCreation=0&lesson=1224&subtype=tasks&pageFlip=87"
                        target="_blank">Eduka: Archimedo jėga</a></li>
                <li><a href="https://klase.eduka.lt/publisher/material/open/theory/12384/19?teachingPackageId=19&teachingGroupCreation=0&lesson=1224&subtype=tasks&pageFlip=91"
                        target="_blank">Eduka: Kodėl neskęsta laivai ir skraido oro balionai?</a></li>
            </ul>
        </div>
    </div>

    <!-- Canvas vieta -->
    <div id="canvasContainer"></div>

    <script>
        // Pagrindiniai kintamieji
        let mase, turis, skyscioTankis, gravitacija;
        let objektoY;
        let objektoGreitis = 0;
        let simuliacijaVyksta = false;

        // p5.js funkcija paleidžiama pradžioje
        function setup() {
            let canvas = createCanvas(600, 400);
            canvas.parent('canvasContainer');
            objektoY = height / 2;

            // Funkcijos mygtukams
            document.getElementById('pradetiMygtukas').addEventListener('click', pradetiSimuliacija);
            document.getElementById('sustabdytiMygtukas').addEventListener('click', sustabdytiSimuliacija);
            document.getElementById('rodytiPaaiskinima').addEventListener('click', keistiPaaiskinimoMatomuma);
            document.getElementById('rodytiDaugiau').addEventListener('click', keistiDaugiauMatomuma);

            atnaujintiParametrus();
        }

        function atnaujintiParametrus() {
            mase = parseFloat(document.getElementById('masesIvestis').value);
            turis = parseFloat(document.getElementById('turioIvestis').value);
            skyscioTankis = parseFloat(document.getElementById('skyscioTankioIvestis').value);
            gravitacija = parseFloat(document.getElementById('gravitacijosIvestis').value);
        }

        function pradetiSimuliacija() {
            atnaujintiParametrus();
            simuliacijaVyksta = true;
            objektoGreitis = 0;
        }

        function sustabdytiSimuliacija() {
            simuliacijaVyksta = false;
        }

        function keistiPaaiskinimoMatomuma() {
            let p = document.getElementById('paaiskinimas');
            p.style.display = (p.style.display === 'none') ? 'block' : 'none';
        }

        function keistiDaugiauMatomuma() {
            let d = document.getElementById('daugiauInformacijos');
            d.style.display = (d.style.display === 'none') ? 'block' : 'none';
        }

        function draw() {
            background(220);
            piestiVandeni();
            piestiObjekta();

            if (simuliacijaVyksta) {
                simuliuotiFizika();
            }

            rodytiInformacija();
        }

        function simuliuotiFizika() {
            let gravitacineJega = mase * gravitacija;
            let archimedoJega = skyscioTankis * turis * gravitacija;

            if (archimedoJega >= gravitacineJega) {
                objektoY = lerp(objektoY, height / 2 - 30, 0.05);
            } else {
                objektoGreitis += 0.1;
                objektoY += objektoGreitis;
                objektoY = constrain(objektoY, height / 2 - 30, height - 60);
            }
        }

        function piestiVandeni() {
            noStroke();
            fill(180, 220, 255);
            rect(0, height / 2, width, height / 2);
        }

        function piestiObjekta() {
            fill(160);
            stroke(0);
            rect(width / 2 - 30, objektoY - 30, 60, 60);
        }

        function rodytiInformacija() {
            let gravitacineJega = mase * gravitacija;
            let archimedoJega = skyscioTankis * turis * gravitacija;

            fill(0);
            textSize(14);
            textAlign(LEFT);

            text(`Masa: ${mase} kg`, 20, height - 100);
            text(`Tūris: ${turis} m³`, 20, height - 80);
            text(`Skysčio tankis: ${skyscioTankis} kg/m³`, 20, height - 60);
            text(`Gravitacija: ${gravitacija} m/s²`, 20, height - 40);
            text(`Fg = ${gravitacineJega.toFixed(2)} N`, 20, height - 20);
            text(`Fb = ${archimedoJega.toFixed(2)} N`, 200, height - 20);

            if (archimedoJega > gravitacineJega) {
                text("Rezultatas: Kūnas plūduriuoja ✅", 350, height - 40);
            } else {
                text("Rezultatas: Kūnas skęsta ❌", 350, height - 40);
            }
        }
    </script>

</body>

</html>
