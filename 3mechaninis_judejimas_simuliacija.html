<!DOCTYPE html>
<html lang="lt">

<head>
  <meta charset="UTF-8" />
  <title>Mechaninio judėjimo simuliacija</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/p5.min.js"></script>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      background-color: #36393f;
      color: #dcdddd;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      padding: 30px 20px 80px;
      box-sizing: border-box;
    }

    h1 {
      margin: 10px 0 20px;
      font-size: 48px;
      color: #f0f8ff;
      text-align: center;
    }

    .skiltis {
      width: 80%;
      padding: 20px;
      margin-bottom: 15px;
      background-color: #434b52;
      border: 1px solid #5865f2;
      border-radius: 8px;
      box-sizing: border-box;
    }

    .antraste {
      cursor: pointer;
      padding: 12px;
      margin-bottom: 10px;
      font-weight: bold;
      background-color: #4f545c;
      color: #fff;
      border-radius: 6px;
      transition: background 0.3s;
    }

    .antraste:hover {
      background-color: #5865f2;
    }

    .turinys {
      display: none;
      padding: 15px;
      border-top: 1px solid #5865f2;
    }

    label,
    .info div {
      display: inline-block;
      margin: 8px 15px 8px 0;
      font-size: 16px;
    }

    input[type="number"],
    select {
      padding: 8px;
      border: 1px solid #5865f2;
      border-radius: 4px;
      background-color: #4f545c;
      color: #dcdddd;
      font-size: 16px;
    }

    button,
    #griztiPradziaMygt {
      padding: 12px 25px;
      margin: 10px 5px 0 0;
      font-size: 16px;
      border: none;
      border-radius: 8px;
      background-color: #434b52;
      color: #fff;
      cursor: pointer;
      transition: background-color 0.3s, box-shadow 0.3s;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
    }

    button:hover,
    #griztiPradziaMygt:hover {
      background-color: #5865f2;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
    }

    #griztiPradziaMygt {
      display: block;
      margin: 20px auto 0;
      font-size: 18px;
      padding: 15px 30px;
      border-radius: 10px;
    }

    canvas {
      display: block;
      margin: 20px auto;
      background-color: #434b52;
      border: 1px solid #5865f2;
      border-radius: 10px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
    }

    footer {
      margin-top: 40px;
      padding: 40px 0;
      font-size: 16px;
      color: #777;
      text-align: center;
      width: 100%;
      box-sizing: border-box;
    }

    a {
      color: #5865f2;
      text-decoration: none;
      transition: color 0.3s;
    }

    a:hover {
      color: #7289da;
    }
  </style>

</head>

<body>
  <div class="skiltis">
    <label>Judėjimo tipas:
      <select id="judTipas">
        <option value="tolygaus">Tolygus</option>
        <option value="pagreitinto">Pagreitėjantis</option>
        <option value="laisvo">Laisvo kritimo</option>
      </select>
    </label>
    <label>Pradinis greitis (m/s):
      <input type="number" id="pradinisGreitis" value="5" step="0.1">
    </label>
    <label>Pagreitis (m/s²):
      <input type="number" id="pagreitis" value="2" step="0.1">
    </label>
    <label>Gravitacija (m/s²):
      <input type="number" id="gravitacija" value="9.8" step="0.1">
    </label>
    <button id="pradetiMygt">Pradėti</button>
    <button id="sustabdytiMygt">Sustabdyti</button>
  </div>

  <div class="skiltis info">
    <div><strong>Laikas:</strong> <span id="laikas">0.00</span> s</div>
    <div><strong>Atstumas:</strong> <span id="atstumas">0.00</span> m</div>
    <div><strong>Greitis:</strong> <span id="greitis">0.00</span> m/s</div>
    <div><strong>Pagreitis:</strong> <span id="dabartinisPagreitis">0.00</span> m/s²</div>
  </div>

  <div class="skiltis">
    <div class="antraste" onclick="toggleTurinys('paaiskinimasTurinys')">Paaiškinimas</div>
    <div class="turinys" id="paaiskinimasTurinys">
      <p id="paaiskinimasTextas">Pasirinkite judėjimo tipą, kad sužinotumėte daugiau apie jį.</p>
      <p><strong>Gravitacija planetose:</strong></p>
      <ul>
        <li>Žemė: 9.8 m/s²</li>
        <li>Marsas: 3.71 m/s²</li>
        <li>Jupiteris: 24.79 m/s²</li>
        <li>Mėnulis: 1.625 m/s²</li>
      </ul>
    </div>
  </div>

  <div class="skiltis">
    <div class="antraste" onclick="toggleTurinys('formulesTurinys')">Matematinės formulės</div>
    <div class="turinys" id="formulesTurinys">
      <div><strong>Tolygaus judėjimo lygtis:</strong> s = v₀ * t + ½ * a * t²</div>
      <p class="formule"><em>Kur: s – kelias, v₀ – pradinis greitis, a – pagreitis, t – laikas</em></p>
      <div><strong>Greitis su pagreičiu:</strong> v = v₀ + a * t</div>
      <p class="formule"><em>Kur: v – galutinis greitis, a – pagreitis, t – laikas</em></p>
      <div><strong>Laisvo kritimo greitis:</strong> v = g * t</div>
      <p class="formule"><em>Kur: g – gravitacija, t – laikas</em></p>
    </div>
  </div>

  <div class="skiltis">
    <div class="antraste" onclick="toggleTurinys('daugiauTurinys')">Daugiau informacijos</div>
    <div class="turinys" id="daugiauTurinys">
      <ul>
        <li><a
            href="https://klase.eduka.lt/publisher/material/open/theory/30019/337?teachingPackageId=337&teachingGroupCreation=0&lesson=32618&subtype=tasks&pageFlip=48"
            target="_blank">Judėjimas iš 11 klasės
            vadovėlio</a></li>
      </ul>
    </div>
  </div>

  <div id="simuliacijosLaukas"></div>

  <button id="griztiPradziaMygt">Grįžti į pradžią</button>

  <footer>
    2024–2025 | VGTU inžinerijos licėjus
  </footer>

  <script>
    let kamuolys,
      laikas = 0,
      veikia = false,
      tipas = "tolygaus";
    const mastelis = 10;
    let canvasas;

    function setup() {
      canvasas = createCanvas(800, 600);
      canvasas.parent(document.getElementById('simuliacijosLaukas'));
      atstatytiKamuoli();

      // Mygtukai
      document.getElementById("pradetiMygt").onclick = () => {
        veikia = true;
        loop(); // Paleidžiam p5.js loop funkciją
      };
      document.getElementById("sustabdytiMygt").onclick = () => {
        veikia = false;
        noLoop(); // Sustabdom p5.js loop funkciją
      };

      // Judėjimo tipas keičiamas
      document.getElementById("judTipas").onchange = () => {
        tipas = document.getElementById("judTipas").value;
        atnaujintiPaaiskinima();
        atstatytiKamuoli();
      };

      ["pradinisGreitis", "pagreitis", "gravitacija"].forEach(id => {
        document.getElementById(id).oninput = atstatytiKamuoli;
      });

      atnaujintiPaaiskinima();

      // Mygtukas "Grįžti į pradžią"
      document.getElementById("griztiPradziaMygt").onclick = () => {
        // Čia įdėkite norimą grįžimo nuorodą
        window.location.href =
          "index.html"; // Pakeiskite į savo norimą nuorodą
      };
      noLoop(); // Sustabdom loop kol nepaspaustas pradėti
    }

    function draw() {
      background(70, 82, 92);
      nubraizytiZeme();
      aukscioZymejimai();

      if (veikia) {
        kamuolys.atnaujinti();
        laikas += deltaTime / 1000;
      }

      kamuolys.rodymas();

      // Rodoma informacija
      document.getElementById("laikas").textContent = nf(laikas, 1, 2);
      document.getElementById("atstumas").textContent = kamuolys.gautiAtstuma();
      document.getElementById("greitis").textContent = kamuolys.gautiGreiti();
      document.getElementById("dabartinisPagreitis").textContent = kamuolys.gautiPagrei();
    }

    // Nubraižoma žemė ir mastelis
    function nubraizytiZeme() {
      stroke(94, 101, 108);
      line(0, height - 50, width, height - 50);

      stroke(70, 82, 92);
      for (let i = 0; i <= width; i += mastelis * 5) {
        let metrai = i / mastelis;
        line(i, height - 50, i, height - 40);
        noStroke();
        fill(153, 170, 181);
        textAlign(CENTER, TOP);
        text(`${metrai} m`, i, height - 35);
        stroke(70, 82, 92);
      }
    }

    // Aukščio skalė kairėje
    function aukscioZymejimai() {
      stroke(70, 82, 92);
      for (let i = height - 50; i > 0; i -= mastelis * 5) {
        let metrai = (height - 50 - i) / mastelis;
        line(0, i, 10, i);
        noStroke();
        fill(153, 170, 181);
        textAlign(LEFT, CENTER);
        text(`${metrai} m`, 15, i);
        stroke(70, 82, 92);
      }
    }

    // Kamuolio atstatymas į pradinę padėtį
    function atstatytiKamuoli() {
      let yPradine = tipas === "laisvo" ? 100 : height - 65;
      kamuolys = new Kamuolys(yPradine);
      laikas = 0;
    }

    // Paaiškinimo tekstas pagal pasirinkimą
    function atnaujintiPaaiskinima() {
      let el = document.getElementById("paaiskinimasTextas");
      if (tipas === "tolygaus") {
        el.textContent = "Tolygaus judėjimo metu objektas juda pastoviu greičiu.";
      } else if (tipas === "pagreitinto") {
        el.textContent = "Pagreitinto judėjimo metu objektas spartėja ar lėtėja.";
      } else if (tipas === "laisvo") {
        el.textContent = "Laisvas kritimas – kai objektas krenta veikiamas tik gravitacijos.";
      }
    }

    // Kamuolio duomenys
    class Kamuolys {
      constructor(y) {
        this.pos = createVector(50, y);
        const v = parseFloat(document.getElementById("pradinisGreitis").value);
        this.greitis = tipas === "laisvo" ? createVector(0, 0) : createVector(v, 0);
        this.pagreitis = createVector(0, 0);
        this.diametras = 20;
      }

      atnaujinti() {
        let dt = deltaTime / 1000;

        if (tipas === "tolygaus") {
          const v = parseFloat(document.getElementById("pradinisGreitis").value);
          this.greitis.x = v;
          this.pagreitis.x = 0;
          this.pos.x += this.greitis.x * dt * mastelis;
        } else if (tipas === "pagreitinto") {
          this.pagreitis.x = parseFloat(document.getElementById("pagreitis").value);
          this.greitis.x += this.pagreitis.x * dt * mastelis;
          this.pos.x += this.greitis.x * dt * mastelis;
        } else if (tipas === "laisvo") {
          this.pagreitis.y = parseFloat(document.getElementById("gravitacija").value);
          this.greitis.y += this.pagreitis.y * dt;
          this.pos.y += this.greitis.y * dt * mastelis;

          if (this.pos.y > height - this.diametras / 2) {
            this.pos.y = height - this.diametras / 2;
            this.greitis.y = 0;
            this.pagreitis.y = 0;
          }
        }
      }

      rodymas() {
        fill(70, 150, 255);
        ellipse(this.pos.x, this.pos.y, this.diametras, this.diametras);
      }

      gautiAtstuma() {
        return tipas === "laisvo" ?
          ((this.pos.y - 100) / mastelis).toFixed(2) :
          (this.pos.x / mastelis).toFixed(2);
      }

      gautiGreiti() {
        return tipas === "laisvo" ?
          this.greitis.y.toFixed(2) :
          this.greitis.x.toFixed(2);
      }

      gautiPagrei() {
        return tipas === "laisvo" ?
          this.pagreitis.y.toFixed(2) :
          this.pagreitis.x.toFixed(2);
      }
    }

    // Skilties atidarymo / uždarymo funkcija
    function toggleTurinys(id) {
      const turinys = document.getElementById(id);
      turinys.style.display = turinys.style.display === "none" ? "block" : "none";
    }
  </script>
</body>

</html>
